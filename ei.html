<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spinnende Eieren met Score en Leaderboard</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
            overflow: hidden;
        }

        .egg {
            width: 100px;
            height: 140px;
            background-color: #fff;
            border-radius: 50%;
            position: absolute;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            animation: spin 3s linear infinite;
            cursor: pointer;
            transition: opacity 1s ease-out;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        .score {
            position: fixed;
            bottom: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .error-message {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: red;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
        }

        .leaderboard {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
        }

        .menu {
            text-align: center;
        }

        .play-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: green;
            color: white;
            font-size: 18px;
            border: none;
            cursor: pointer;
        }

        .play-btn:hover {
            background-color: darkgreen;
        }
    </style>
</head>
<body>
    <div class="menu">
        <h1>Welkom bij Spinnende Eieren!</h1>
        <button class="play-btn" id="playBtn">Play</button>
        <div id="leaderboard"></div>
    </div>

    <div class="score">Score: 0</div>
    <div class="error-message">Mis! -1</div>

    <script>
        let score = 0;
        let playerName = '';
        let spawnInterval = 1000;
        const errorMessage = document.querySelector('.error-message');
        const scoreDisplay = document.querySelector('.score');
        const leaderboardDiv = document.querySelector('#leaderboard');
        const menuDiv = document.querySelector('.menu');

        // Vraag de naam van de speler
        function askPlayerName() {
            playerName = prompt("Voer je naam in voor het leaderboard:");
            if (!playerName) {
                playerName = "Anonieme Speler";
            }
            showLeaderboard();
            menuDiv.style.display = 'none';
            startGame();
        }

        // Toon leaderboard
        function showLeaderboard() {
            const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
            leaderboardDiv.innerHTML = '<h2>Leaderboard:</h2>';
            leaderboard.sort((a, b) => b.score - a.score); // Sorteer op score (hoogste bovenaan)

            leaderboard.forEach((entry, index) => {
                leaderboardDiv.innerHTML += `<p>${index + 1}. ${entry.name} - ${entry.score} punten</p>`;
            });
        }

        // Sla score op in het leaderboard
        function saveScore() {
            const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
            leaderboard.push({ name: playerName, score: score });
            leaderboard.sort((a, b) => b.score - a.score);
            if (leaderboard.length > 10) {
                leaderboard.pop(); // Beperk tot de top 10 scores
            }
            localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
        }

        // Functie om het spel te starten
        function startGame() {
            let interval = setInterval(createEgg, spawnInterval);

            // Stop het spel na 30 seconden
            setTimeout(() => {
                clearInterval(interval);
                saveScore();
                showLeaderboard();
                alert(`Spel afgelopen! Je score: ${score}`);
                menuDiv.style.display = 'block';
            }, 30000); // Na 30 seconden
        }

        // Functie om een nieuw ei toe te voegen
        function createEgg() {
            const egg = document.createElement('div');
            egg.classList.add('egg');
            egg.style.left = Math.random() * (window.innerWidth - 100) + 'px';
            egg.style.top = Math.random() * (window.innerHeight - 140) + 'px';
            document.body.appendChild(egg);

            egg.addEventListener('click', () => {
                egg.remove();
                score++;
                updateScore();
            });

            setTimeout(() => {
                egg.style.opacity = 0;
                setTimeout(() => {
                    egg.remove();
                }, 1000);
            }, 3000);
        }

        // Score bijwerken
        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }

        // Handle misklik
        function handleMisclick(event) {
            score--;
            updateScore();
            showErrorMessage(event);
        }

        // Foutmelding tonen
        function showErrorMessage(event) {
            errorMessage.style.left = event.pageX + 'px';
            errorMessage.style.top = event.pageY + 'px';
            errorMessage.style.opacity = 1;
            setTimeout(() => {
                errorMessage.style.opacity = 0;
            }, 2000);
        }

        // Speel het spel
        document.getElementById('playBtn').addEventListener('click', askPlayerName);

        // Start het spel wanneer op Play wordt gedrukt
        window.onload = () => {
            showLeaderboard();
        };
    </script>
</body>
</html>
